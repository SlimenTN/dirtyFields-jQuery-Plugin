(function(a){function g(e,f){var g=e.attr("name");var h=false;var i=e.is(":checked");if(i!=e.data(f.data("dF").startingValueDataProperty)){d("checkboxRadioContext",e,"changed",f);h=true}else{d("checkboxRadioContext",e,"unchanged",f)}if(e.attr("type")=="radio"){a(":radio[name='"+g+"']",f).each(function(b){var c=a(this);var e=c.attr("name");var g=c.is(":checked");if(g!=c.data(f.data("dF").startingValueDataProperty)){d("checkboxRadioContext",c,"changed",f);h=true}else{d("checkboxRadioContext",c,"unchanged",f)}})}if(h){b(g,f,"dirty")}else{b(g,f,"clean")}if(a.isFunction(f.data("dF").fieldChangeCallback)){f.data("dF").fieldChangeCallback.call(e,e.data(f.data("dF").startingValueDataProperty),h)}if(f.data("dF").denoteDirtyForm){c(f)}}function f(e,f){var g=e.attr("name");var h=false;if(f.data("dF").denoteDirtyOptions==false&&e.attr("multiple")==false){if(e.val()!=e.data(f.data("dF").startingValueDataProperty)){d("textboxSelectContext",e,"changed",f);b(g,f,"dirty");h=true}else{d("textboxSelectContext",e,"unchanged",f);b(g,f,"clean")}}else{var i=false;e.children("option").each(function(b){var c=a(this);var d=c.is(":selected");if(d!=c.data(f.data("dF").startingValueDataProperty)){if(f.data("dF").denoteDirtyOptions){c.addClass(f.data("dF").dirtyOptionClass)}i=true}else{if(f.data("dF").denoteDirtyOptions){c.removeClass(f.data("dF").dirtyOptionClass)}}});if(i){d("textboxSelectContext",e,"changed",f);b(g,f,"dirty");h=true}else{d("textboxSelectContext",e,"unchanged",f);b(g,f,"clean")}}if(a.isFunction(f.data("dF").fieldChangeCallback)){f.data("dF").fieldChangeCallback.call(e,e.data(f.data("dF").startingValueDataProperty),h)}if(f.data("dF").denoteDirtyForm){c(f)}}function e(e,f){var g=e.attr("name");var h=false;if(f.data("dF").trimText){var i=jQuery.trim(e.val())}else{var i=e.val()}if(i!=e.data(f.data("dF").startingValueDataProperty)){d("textboxSelectContext",e,"changed",f);b(g,f,"dirty");h=true}else{d("textboxSelectContext",e,"unchanged",f);b(g,f,"clean")}if(a.isFunction(f.data("dF").fieldChangeCallback)){f.data("dF").fieldChangeCallback.call(e,e.data(f.data("dF").startingValueDataProperty),h)}if(f.data("dF").denoteDirtyForm){c(f)}}function d(b,c,d,e){var f=e.data("dF").fieldOverrides;var g=c.attr("id");var h=false;for(var i in f){if(g==i){if(d=="changed"){a("#"+f[i]).addClass(e.data("dF").dirtyFieldClass)}else{a("#"+f[i]).removeClass(e.data("dF").dirtyFieldClass)}h=true}}if(h==false){if(b=="textboxSelectContext"){var j=e.data("dF").textboxSelectContext}else{var j=e.data("dF").checkboxRadioContext}var k=j.split("-");switch(k[0]){case"next":if(d=="changed"){c.next(k[1]).addClass(e.data("dF").dirtyFieldClass)}else{c.next(k[1]).removeClass(e.data("dF").dirtyFieldClass)}break;case"previous":if(d=="changed"){c.prev(k[1]).addClass(e.data("dF").dirtyFieldClass)}else{c.prev(k[1]).removeClass(e.data("dF").dirtyFieldClass)}break;case"closest":if(d=="changed"){c.closest(k[1]).addClass(e.data("dF").dirtyFieldClass)}else{c.closest(k[1]).removeClass(e.data("dF").dirtyFieldClass)}break;default:if(k[0]=="id"||k[0]=="name"){switch(k[1]){case"class":if(d=="changed"){a("."+c.attr(k[0]),e).addClass(e.data("dF").dirtyFieldClass)}else{a("."+c.attr(k[0]),e).removeClass(e.data("dF").dirtyFieldClass)}break;case"title":if(d=="changed"){a("*[title='"+c.attr(k[0])+"']",e).addClass(e.data("dF").dirtyFieldClass)}else{a("*[title='"+c.attr(k[0])+"']",e).removeClass(e.data("dF").dirtyFieldClass)}break;case"for":if(d=="changed"){a("label[for='"+c.attr(k[0])+"']",e).addClass(e.data("dF").dirtyFieldClass)}else{a("label[for='"+c.attr(k[0])+"']",e).removeClass(e.data("dF").dirtyFieldClass)}break}}break}}}function c(b){if(a("."+b.data("dF").dirtyFieldClass,b).length>0){b.addClass(b.data("dF").dirtyFormClass);if(a.isFunction(b.data("dF").formChangeCallback)){b.data("dF").formChangeCallback.call(b,true,b.data("dF").dirtyFieldsDataProperty)}}else{b.removeClass(b.data("dF").dirtyFormClass);if(a.isFunction(b.data("dF").formChangeCallback)){b.data("dF").formChangeCallback.call(b,false,b.data("dF").dirtyFieldsDataProperty)}}}function b(b,c,d){var e=c.data("dF").dirtyFieldsDataProperty;var f=a.inArray(b,e);if(d=="dirty"&&f==-1){e.push(b);c.data("dF").dirtyFieldsDataProperty=e}else if(d=="clean"&&f>-1){e.splice(f,1);c.data("dF").dirtyFieldsDataProperty=e}}a.fn.dirtyFields=function(b){var c=a.extend({},a.fn.dirtyFields.defaults,b);return this.each(function(){var b=a(this);b.data("dF",c);b.data("dF").dirtyFieldsDataProperty=new Array;a("input[type='text'],input[type='file'],input[type='password'],textarea",b).each(function(c){a.fn.dirtyFields.configureField(a(this),b,"text")});a("select",b).each(function(c){a.fn.dirtyFields.configureField(a(this),b,"select")});a(":checkbox,:radio",b).each(function(c){a.fn.dirtyFields.configureField(a(this),b,"checkRadio")});a.fn.dirtyFields.setStartingValues(b)})};a.fn.dirtyFields.defaults={checkboxRadioContext:"next-span",denoteDirtyOptions:false,denoteDirtyForm:false,dirtyFieldClass:"dirtyField",dirtyFieldsDataProperty:"dirtyFields",dirtyFormClass:"dirtyForm",dirtyOptionClass:"dirtyOption",fieldChangeCallback:"",formChangeCallback:"",preFieldChangeCallback:"",startingValueDataProperty:"startingValue",textboxSelectContext:"id-for",trimText:false,fieldOverrides:{none:"none"}};a.fn.dirtyFields.configureField=function(b,c,d,h){if(typeof h!="undefined"){c.data("dF").fieldOverrides[b.attr("id")]=h}switch(d){case"text":b.change(function(){if(a.isFunction(c.data("dF").preFieldChangeCallback)){if(c.data("dF").preFieldChangeCallback.call(b,b.data(c.data("dF").startingValueDataProperty))==false){return false}}e(b,c)});break;case"select":b.change(function(){if(a.isFunction(c.data("dF").preFieldChangeCallback)){if(c.data("dF").preFieldChangeCallback.call(b,b.data(c.data("dF").startingValueDataProperty))==false){return false}}f(b,c)});break;case"checkRadio":b.change(function(){if(a.isFunction(c.data("dF").preFieldChangeCallback)){if(c.data("dF").preFieldChangeCallback.call(b,b.data(c.data("dF").startingValueDataProperty))==false){return false}}g(b,c)});break}};a.fn.dirtyFields.formSaved=function(b){a.fn.dirtyFields.setStartingValues(b);a.fn.dirtyFields.markContainerFieldsClean(b)};a.fn.dirtyFields.markContainerFieldsClean=function(b){var c=new Array;b.data("dF").dirtyFieldsDataProperty=c;a("."+b.data("dF").dirtyFieldClass,b).removeClass(b.data("dF").dirtyFieldClass);if(b.data("dF").denoteDirtyOptions){a("."+b.data("dF").dirtyOptionClass,b).removeClass(b.data("dF").dirtyOptionClass)}if(b.data("dF").denoteDirtyForm){b.removeClass(b.data("dF").dirtyFormClass)}};a.fn.dirtyFields.setStartingValues=function(b,c){a("input[type='text'],input[type='file'],input[type='password'],:checkbox,:radio,textarea",b).each(function(c){var d=a(this);if(d.attr("type")=="radio"||d.attr("type")=="checkbox"){a.fn.dirtyFields.setStartingCheckboxRadioValue(d,b)}else{a.fn.dirtyFields.setStartingTextValue(d,b)}});a("select",b).each(function(c){a.fn.dirtyFields.setStartingSelectValue(a(this),b)})};a.fn.dirtyFields.setStartingTextValue=function(b,c){return b.each(function(){var b=a(this);b.data(c.data("dF").startingValueDataProperty,b.val())})};a.fn.dirtyFields.setStartingCheckboxRadioValue=function(b,c){return b.each(function(){var b=a(this);var d;if(b.is(":checked")){b.data(c.data("dF").startingValueDataProperty,true)}else{b.data(c.data("dF").startingValueDataProperty,false)}})};a.fn.dirtyFields.setStartingSelectValue=function(b,c){return b.each(function(){var b=a(this);if(c.data("dF").denoteDirtyOptions==false&&b.attr("multiple")==false){b.data(c.data("dF").startingValueDataProperty,b.val())}else{var d=new Array;b.children("option").each(function(b){var e=a(this);if(e.is(":selected")){e.data(c.data("dF").startingValueDataProperty,true);d.push(e.val())}else{e.data(c.data("dF").startingValueDataProperty,false)}});b.data(c.data("dF").startingValueDataProperty,d)}})};a.fn.dirtyFields.rollbackTextValue=function(b,c,d){if(typeof d=="undefined"){d=true}return b.each(function(){var b=a(this);b.val(b.data(c.data("dF").startingValueDataProperty));if(d){e(b,c)}})};a.fn.dirtyFields.updateTextState=function(b,c){return b.each(function(){e(a(this),c)})};a.fn.dirtyFields.rollbackCheckboxRadioState=function(b,c,d){if(typeof d=="undefined"){d=true}return b.each(function(){var b=a(this);if(b.data(c.data("dF").startingValueDataProperty)){b.attr("checked",true)}else{b.attr("checked",false)}if(d){g(b,c)}})};a.fn.dirtyFields.updateCheckboxRadioState=function(b,c){return b.each(function(){g(a(this),c)})};a.fn.dirtyFields.rollbackSelectState=function(b,c,d){if(typeof d=="undefined"){d=true}return b.each(function(){var b=a(this);if(c.data("dF").denoteDirtyOptions==false&&b.attr("multiple")==false){b.val(b.data(c.data("dF").startingValueDataProperty))}else{b.children("option").each(function(b){var d=a(this);if(d.data(c.data("dF").startingValueDataProperty)){d.attr("selected",true)}else{d.attr("selected",false)}})}if(d){f(b,c)}})};a.fn.dirtyFields.updateSelectState=function(b,c){return b.each(function(){f(a(this),c)})};a.fn.dirtyFields.rollbackForm=function(b){a("input[type='text'],input[type='file'],input[type='password'],:checkbox,:radio,textarea",b).each(function(c){$object=a(this);if($object.attr("type")=="radio"||$object.attr("type")=="checkbox"){a.fn.dirtyFields.rollbackCheckboxRadioState($object,b,false)}else{a.fn.dirtyFields.rollbackTextValue($object,b,false)}});a("select",b).each(function(c){a.fn.dirtyFields.rollbackSelectState(a(this),b,false)});a.fn.dirtyFields.markContainerFieldsClean(b)};})(jQuery)